var mod_pagespeed_8_0s1s09DB = "!function(a){\"use strict\";if(\"undefined\"==typeof a)return void(\"console\"in window&&window.console.info(\"Too much lightness, Featherlight needs jQuery.\"));var b=a.featherlight=function(c,d){if(this.constructor===b)this.id=b.id++;else{if(\"string\"==typeof c||!1!=c instanceof a){var e=(new b).setup(c,d);return e.config.open.call(e),e}d=a.extend({},b.defaults,c||{}),a(d.selector,d.context).featherlight()}},c=function(a){if(27===a.keyCode&&!a.isDefaultPrevented()){var c=b.current();c&&c.config.closeOnEsc&&(c.$instance.find(\".\"+c.config.namespace+\"-close:first\").click(),a.preventDefault())}};a.extend(b,{id:0,defaults:{autostart:!0,namespace:\"featherlight\",selector:\"[data-featherlight]\",context:\"body\",type:{image:!1,ajax:!1},targetAttr:\"data-featherlight\",variant:null,resetCss:!1,background:null,openTrigger:\"click\",closeTrigger:\"click\",openSpeed:250,closeSpeed:250,closeOnClick:\"background\",closeOnEsc:!0,closeIcon:\"&#10005;\",beforeOpen:a.noop,beforeClose:a.noop,afterOpen:a.noop,afterClose:a.noop,contentFilters:[\"jquery\",\"image\",\"html\",\"ajax\"],open:function(a){var b=this.config.beforeOpen.call(this,a);return!1!==b&&(b=this.open(a)),!1!==b&&this.config.afterOpen.call(this,a),b},close:function(a){var b=this.config.beforeClose.call(this,a);!1!==b&&this.close(a)}},methods:{setup:function(c,d){\"object\"!=typeof c||c instanceof a!=!1||d||(d=c,c=void 0),d=a.extend({},b.defaults,d);var e=d.resetCss?d.namespace+\"-reset\":d.namespace,f=a(d.background||'<div class=\"'+e+'\"><div class=\"'+e+'-content\"><span class=\"'+e+\"-close-icon \"+d.namespace+'-close\">'+d.closeIcon+\"</span></div></div>\"),g=this;return a.extend(g,{config:d,target:c,$instance:f.clone().addClass(d.variant)}),g.$instance.on(d.closeTrigger+\".\"+d.namespace,function(b){var c=a(b.target);(\"background\"===d.closeOnClick&&c.is(\".\"+d.namespace)||\"anywhere\"===d.closeOnClick||c.is(\".\"+d.namespace+\"-close\"))&&(b.preventDefault(),d.close.call(g))}),this},attach:function(b,c,d){var e={};return a.each(b[0].attributes,function(){var b=this.name.match(/^data-featherlight-(.*)/);if(b){var c=this.value;try{c=a.parseJSON(c)}catch(d){}e[a.camelCase(b[1])]=c}}),this.$elm=b,this.setup(c,a.extend(e,d)),b.on(this.config.openTrigger+\".\"+this.config.namespace,a.proxy(this.config.open,this)),this},getContent:function(){var c,d=this,e=d.target||d.$elm.attr(d.config.targetAttr)||\"\";for(var f in d.config.type)d.config.type[f]===!0&&(c=b.contentFilters[f]);if(!c&&e in b.contentFilters&&(c=b.contentFilters[e],e=d.target&&d.$elm.attr(d.config.targetAttr)),e=e||d.$elm.attr(\"href\")||\"\",!c){var g=e;if(e=null,a.each(d.config.contentFilters,function(){return c=b.contentFilters[this],c.test&&(e=c.test(g)),!e&&c.regex&&g.match&&g.match(c.regex)&&(e=g),!e}),!e)return\"console\"in window&&window.console.error(\"Featherlight: no content filter found \"+(g?' for \"'+g+'\"':\" (no target specified)\")),!1}return c.process.call(d,e)},setContent:function(b){var c=this;(b.is(\"iframe\")||a(\"iframe\",b).length>0)&&c.$instance.addClass(c.config.namespace+\"-iframe\"),c.$content=b.clone().addClass(c.config.namespace+\"-inner\"),c.$instance.find(\".\"+c.config.namespace+\"-inner\").remove(),c.$instance.find(\".\"+c.config.namespace+\"-content\").append(c.$content)},open:function(d){var e=this;d&&d.preventDefault();var f=this.getContent();return f?(e.constructor._opened.add(e._openedCallback=function(a){e.$instance.closest(\"body\").length>0&&(a.currentFeatherlight=e)}),this.config.closeOnEsc&&c&&(a(document).bind(\"keyup.\"+b.defaults.namespace,c),c=null),this.setContent(f),this.$instance.appendTo(\"body\").fadeIn(this.config.openSpeed),void 0):!1},close:function(a){var b=this;b.constructor._opened.remove(b._openedCallback),b.$instance.fadeOut(b.config.closeSpeed,function(){b.$instance.detach(),b.config.afterClose.call(b,a)})}},contentFilters:{jquery:{regex:/^[#.]\\w/,test:function(b){return b instanceof a&&b},process:function(b){return a(b)}},image:{regex:/\\.(png|jpg|jpeg|gif|tiff|bmp)(\\?\\S*)?$/i,process:function(b){return a('<img src=\"'+b+'\" alt=\"\" class=\"'+this.config.namespace+'-image\" />')}},html:{regex:/^\\s*<[\\w!][^<]*>/,process:function(b){return a(b)}},ajax:{regex:/./,process:function(b){var c=this,d=a(\"<div></div>\").load(b,function(b,e){\"error\"!==e&&a.featherlight(d.html(),a.extend({},c.config,{type:{html:!0}}))})}}},current:function(){var a={};return this._opened.fire(a),a.currentFeatherlight},close:function(){var a=b.current();a&&a.config.close.call(a)},_opened:a.Callbacks()}),b.prototype=a.extend({constructor:b},b.methods),a.fn.featherlight=function(c,d){return this.each(function(){(new b).attach(a(this),d,c)}),this},a(document).ready(function(){var c=b.defaults;c.autostart&&a(c.selector,c.context).featherlight()})}(jQuery);";
var mod_pagespeed_wdOloM_RTk = "!function(a){\"use strict\";if(\"undefined\"==typeof a)return void(\"console\"in window&&(window.console.info(\"Too much lightness, Featherlight needs jQuery.\"),\"featherlight\"in a||window.console.info(\"Load the featherlight plugin before the gallery plugin\")));var b=\"ontouchstart\"in document.documentElement,c=a.event&&a.event.special.swipeleft&&a,d=\"Hammer\"in window&&function(){new window.Hammer(el[0])},e=b&&(c||d);a.fn.featherlightGallery=function(b){var c=a(this),d={gallery:{previous:\"&#9664;\",next:\"&#9654;\",fadeIn:100,fadeOut:300},type:{image:!0}},f=b&&b.afterOpen,g=b&&b.afterClose,h={afterClose:function(a){var b=this;b.$instance.off(\"next.\"+b.config.namespace+\" previous.\"+b.config.namespace),e&&(b.$instance.off(\"swipeleft\"),b.$instance.off(\"swiperight\")),\"function\"==typeof g&&g.call(this,a)},afterOpen:function(b){var d=this,g=d.$instance.find(\"img\");if(d.$currentTarget=a(b.currentTarget),g.load(function(){g.stop().fadeTo(d.config.gallery.fadeIn,1)}),d.$instance.on(\"next.\"+d.config.namespace+\" previous.\"+d.config.namespace,function(a){var b=\"next\"===a.type?1:-1,e=c.eq((c.index(d.$currentTarget)+b)%c.length);g.fadeTo(d.config.gallery.fadeOut,.2),d.$currentTarget=e,g[0].src=e.attr(\"href\")}),e)e(d.$instance).on(\"swipeleft\",function(){d.$instance.trigger(\"next\")}).on(\"swiperight\",function(){d.$instance.trigger(\"previous\")});else{var h=function(b){return a('<span title=\"'+b+'\" class=\"'+d.config.namespace+\"-\"+b+'\"><span>'+d.config.gallery[b]+\"</span></span>\").click(function(){a(this).trigger(b+\".\"+d.config.namespace)})};g.after(h(\"previous\")).after(h(\"next\"))}\"function\"==typeof f&&f.call(this,b)}};c.featherlight(a.extend(!0,{},d,b,h))},a.featherlightGallery=function(b,c){\"object\"!=typeof b&&(b=a(b)),b.featherlightGallery(c)}}(jQuery);";
var mod_pagespeed_SuA9lFYa2j = "$().ready(function(){if($(window).width()<1270){$(\"#top_search_form\").hide();};if($(\"#leftcolumn-region-id\").val()==78){$(\"#leftcolumn-region-office-spb\").show();$(\"#leftcolumn-region-img-spb\").show();$(\"#top-offices-spb\").show();$(\"#top-offices-msk\").hide();$(\"#spb_info\").show();}else{$(\"#leftcolumn-region-office-msk\").show();$(\"#leftcolumn-region-img-msk\").show();$(\"#top-offices-msk\").show();$(\"#top-offices-spb\").hide();$(\"#spb_info\").hide();};$(\"#leftcolumn-region-title\").click(function(){$(this).hide();$(\"#leftcolumn-region-selector\").show();});$(\"#leftcolumn-region-selector\").blur(function(){$(this).hide();$(\"#leftcolumn-region-title\").show();});$(\"#reg_sel\").tooltip({position:{my:'center top',at:'center bottom+10'}});$('#reg_sel').tooltip(\"open\");setTimeout(\"$('#reg_sel').tooltip('close');\",5000);$('#reg_sel').click(function(){change_city();});$('#cart-top').html(\"<img src='/images/icons/ajax-loader_30.gif' >\");$('#cart-top').load('ajax/update_cart.php');$(\"#leftcolumn-region-confirm\").click(function(){$.post(\"/ajax/set_user_region_confirm.php\",function(data){if(data.state){$(\"#leftcolumn-region-confirm\").hide();};});});$(\".cart-header-counter,.cart-header-total\").click(function(){window.location.href='/basket.php';});if($('#top-search-input').length){var searh_pos=$('#top-search-input').position().top;var menu_pos=$('.top-menu-row').position().top;$(window).scroll(function(){if($(window).scrollTop()>searh_pos){$('#header-search').show();}else{$('#header-search').hide();};if($(window).scrollTop()>96){$('.header-top-line2').addClass(\"header-top-line2_add\");}else{$('.header-top-line2').removeClass(\"header-top-line2_add\");};});}\n$(\"#top-top-search-button\").click(function(){$('#top_search_form').submit();});$('#top-top-search-input').keydown(function(event){if(event.keyCode==13){$('#top_search_form').submit();};});$('#helper').click(function(){$(\"#dialog\").load(\"ajax/error_request.php\",function(){$(\"#dialog\").dialog({modal:true,title:\"Сообщение об ошибке\",width:\"485px\"});});});$('#helper').mouseover(function(){$('#helper').html('Заметили ошибку в работе сайта? <br>Скажите нам об этом').addClass('cl_helper_').removeClass('cl_helper');}).mouseout(function(){$('#helper').html('').addClass('cl_helper_').removeClass('cl_helper');});setTimeout(hide_helper,5000);function hide_helper(){$('#helper').html('').addClass('cl_helper_').removeClass('cl_helper');};var fnames=new Array();var ftypes=new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='MMERGE3';ftypes[3]='text';if($('form').is('#mc-embedded-subscribe-form')){mce_init_form();}\nfunction mce_init_form(){jQuery(document).ready(function($){var options={errorClass:'mce_inline_error',errorElement:'div',onkeyup:function(){},onfocusout:function(){},onblur:function(){}};var mce_validator=$(\"#mc-embedded-subscribe-form\").validate(options);$(\"#mc-embedded-subscribe-form\").unbind('submit');options={url:'//terraelectronica.us8.list-manage.com/subscribe/post-json?u=75e493283d439a4dea57a7811&id=7e8d429e78&c=?',type:'GET',dataType:'json',contentType:\"application/json; charset=utf-8\",beforeSubmit:function(){$('#mce_tmp_error_msg').remove();$('.datefield','#mc_embed_signup').each(function(){var txt='filled';var fields=new Array();var i=0;$(':text',this).each(function(){fields[i]=this;i++;});$(':hidden',this).each(function(){var bday=false;if(fields.length==2){bday=true;fields[2]={'value':1970};}\nif(fields[0].value=='MM'&&fields[1].value=='DD'&&(fields[2].value=='YYYY'||(bday&&fields[2].value==1970))){this.value='';}else if(fields[0].value==''&&fields[1].value==''&&(fields[2].value==''||(bday&&fields[2].value==1970))){this.value='';}else{if(/\\[day\\]/.test(fields[0].name)){this.value=fields[1].value+'/'+fields[0].value+'/'+fields[2].value;}else{this.value=fields[0].value+'/'+fields[1].value+'/'+fields[2].value;}}});});$('.phonefield-us','#mc_embed_signup').each(function(){var fields=new Array();var i=0;$(':text',this).each(function(){fields[i]=this;i++;});$(':hidden',this).each(function(){if(fields[0].value.length!=3||fields[1].value.length!=3||fields[2].value.length!=4){this.value='';}else{this.value='filled';}});});return mce_validator.form();},success:mce_success_cb};$('#mc-embedded-subscribe-form').ajaxForm(options);});}\nfunction mce_success_cb(resp){$('#mce-success-response').hide();$('#mce-error-response').hide();if(resp.result==\"success\"){$('#mce-'+resp.result+'-response').show();$('#mce-'+resp.result+'-response').html(resp.msg);$('#mc-embedded-subscribe-form').each(function(){this.reset();});}else{var index=-1;var msg;try{var parts=resp.msg.split(' - ',2);if(parts[1]==undefined){msg=resp.msg;}else{i=parseInt(parts[0]);if(i.toString()==parts[0]){index=parts[0];msg=parts[1];}else{index=-1;msg=resp.msg;}}}catch(e){index=-1;msg=resp.msg;}\ntry{if(index==-1){$('#mce-'+resp.result+'-response').show();$('#mce-'+resp.result+'-response').html(msg);}else{err_id='mce_tmp_error_msg';err_style='';html='<div id=\"'+err_id+'\" style=\"'+err_style+'\"> '+msg+'</div>';var input_id='#mc_embed_signup';var f=$(input_id);if(ftypes[index]=='address'){input_id='#mce-'+fnames[index]+'-addr1';f=$(input_id).parent().parent().get(0);}else if(ftypes[index]=='date'){input_id='#mce-'+fnames[index]+'-month';f=$(input_id).parent().parent().get(0);}else{input_id='#mce-'+fnames[index];f=$().parent(input_id).get(0);}\nif(f){$(f).append(html);$(input_id).focus();}else{$('#mce-'+resp.result+'-response').show();$('#mce-'+resp.result+'-response').html(msg);}}}catch(e){$('#mce-'+resp.result+'-response').show();$('#mce-'+resp.result+'-response').html(msg);}}\n$('#mce-responses').removeClass('clear');}});function add_cart(post){var scrl=$(window).scrollTop();$('#cart-top').html(\"<img src='/images/icons/ajax-loader_30.gif' >\");$('#cart-top').load('ajax/update_cart.php',post,function(){$(window).scrollTop(scrl);});}\nfunction price_request(id1,name1,title_text){$(\"#dialog\").load(\"ajax/price_request.php\",{id:id1,name:name1},function(){$(\"#dialog\").dialog({modal:true,title:\"\"+title_text,width:\"350px\"});});return false;}\nfunction uved_request(id1,name1,title_text){$(\"#dialog\").load(\"ajax/uved_request.php\",{id:id1,name:name1},function(){$(\"#dialog\").dialog({modal:true,title:\"\"+title_text});});return false;}\nfunction show_rec_dialog(cl){if($(\"input.cli_type:radio:checked\").val()){$(\"#ajax_loader\").show();$('#select_client_dialog').load('/ajax/load_recv.php?Client='+cl,function(){if(cl=='1'){var form_data=jQuery('#Form1').serialize();jQuery.post('/ajax/registr_user.php',form_data,function(data){$('#reg_result').html(data);if($('#changestk').text()){$.get('ajax/update_cart.php?'+$('#changestk').text(),function(){$('#Form1').submit();});}else{$('#Form1').submit();}});}else{$('#select_client_dialog').dialog({autoOpen:false,modal:true,width:\"600\",minHeight:\"400\",draggable:true,closeText:\"Закрыть\",resizable:true,closeWithEscape:true,title:'Проверьте реквизиты',open:function(){$(\"#member_fields\\\\[ur_state_id\\\\]\").combobox1();}});$(\"#select_client_dialog\").dialog(\"open\");$(\"#ajax_loader\").hide();}});}else{alert('Вы не выбрали, как  будете получать заказ');};return false;}\nfunction change_city(){$('#ajax_loader').show(function(){$('#regions-dialog').load('ajax/regions_load.php',function(){$('#regions-dialog').dialog({autoOpen:false,modal:true,width:\"1100\",height:\"600\",minHeight:\"400\",draggable:true,closeText:\"close\",resizable:true,closeWithEscape:true,title:'Выбор города'});$(\"#regions-dialog\").dialog(\"open\");$('#ajax_loader').hide();});$('#ajax_loader').hide();});}";
var mod_pagespeed_xlUpvgTYk$ = "$(function(){$(\".catalog-filter-param\").change(function(){var p_id=$(this).data(\"parid\");if($(this).val()===$(\"#catalog-form-selectall\").val()){$(\"#catalog-f_\"+p_id).val(\"\").remove();}else{var p=document.createElement(\"input\");p.type=\"hidden\";p.id=\"catalog-f_\"+p_id;p.name=\"f[\"+p_id+\"]\";p.value=$(this).val();}\n$(\"#catalog-form-filter\").append(p).submit();});$(\".catalog-filter-all\").click(function(){$(\"#catalog-form-filter\").find(\"input\").each(function(i,item){if($(item).attr(\"name\")!==\"ID\"){$(item).remove();}});$(\"#catalog-form-filter\").submit();});$(\".catalog-maintable-name-link\").click(function(){});$(\".catalog-maintable-price-none\").click(function(){window.open($(this).attr(\"href\"),\"\",\"toolbar=0, scrollbars=0, top=100, left=100, width=400, height=240\");return false;});$(\".catalog-maintable-qnt-refresh\").click(function(){var that=this;var dcode=$(that).attr('id').split('_');var backup=new Object();$('#qntdt_'+dcode[2]).css('background-image','url(/images/icons/toc_load.gif)');backup.TER=$('#qntd_ter_'+dcode[2]).text()*1;backup.CENTRE=$('#qntd_centre_'+dcode[2]).text()*1;backup.MEGA=$('#qntd_mega_'+dcode[2]).text()*1;$('#qntd_ter_'+dcode[2]+', #qntd_centre_'+dcode[2]+', #qntd_mega_'+dcode[2]).text('...');$.getJSON(\"/ajax/get_stock_qnt.php\",{code:dcode[2],format:\"json\",stock:$('#stock_name').text()},function(data){if(data.state){$('#qntd_ter_'+dcode[2]).text(data.stock.TER+data.stock.VITR_TER+0);$('#qntd_centre_'+dcode[2]).text(data.stock.CENTRE);$('#qntd_mega_'+dcode[2]).text(data.stock.MEGA);$('#price_table_'+dcode[2]).html(data.price_html);$('#qty_table_'+dcode[2]).html(data.qty_html);}else{$('#qntd_ter_'+dcode[2]).text(backup.TER);$('#qntd_centre_'+dcode[2]).text(backup.CENTRE);$('#qntd_mega_'+dcode[2]).text(backup.MEGA);}\n$('#qntdt_'+dcode[2]).css('background-image','url(/images/icons/blue_refresh_icon.png)');});return false;});$(\".catalog-maintable-qnt-none\").click(function(){window.open($(this).attr(\"href\"),\"\",\"toolbar=0, scrollbars=0, top=100, left=100, width=400, height=200\");return false;});});$().ready(function(){var i=1;$(\"span.dms_but\").each(function(){$(this).prop(\"id\",\"clickTip_\"+i);var elem=$(this);var url=$(this).attr(\"rel\");var id=$(this).attr(\"stock_code\");var ajaxTip=$('<div id=\"ajax-tip_'+id+'\" style=\"display:none;\">Поиск предложений</div>').appendTo('body');elem.tooltip({position:{my:\"left-30 bottom-20\",at:\"left center\"},items:elem,content:function(callback){var data=ajaxTip.html();$.post(url,function(data){$('#ajax_loader').hide();callback(data);});}});elem.off(\"mouseover\");elem.on(\"click\",function(e){e.preventDefault();$('#ajax_loader').show();elem.tooltip(\"open\").tooltip(\"disable\");});elem.on(\"mouseout\",function(){setTimeout(function(){elem.tooltip(\"enable\").tooltip(\"close\");},10000);});i++;});});";
var mod_pagespeed_DUhJ_OPU$y = ";(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}if(typeof options=='function'){options={success:options};}var action=this.attr('action');var url=(typeof action==='string')?$.trim(action):'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}url=url||window.location.href||'';options=$.extend(true,{url:url,type:this.attr('method')||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}var n,v,a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(n in options.data){if(options.data[n]instanceof Array){for(var k in options.data[n]){a.push({name:n,value:options.data[n][k]});}}else{v=options.data[n];v=$.isFunction(v)?v():v;a.push({name:n,value:v});}}}if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}var q=$.param(a);if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}else{options.data=q;}var $form=this,callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}if(options.clearForm){callbacks.push(function(){$form.clearForm();});}if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}else if(options.success){callbacks.push(options.success);}options.success=function(data,status,xhr){var context=options.context||options;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};var fileInputs=$('input:file',this).length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);if(options.iframe!==false&&(fileInputs||options.iframe||multipart)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,fileUpload);}else{fileUpload();}}else{$.ajax(options);}this.trigger('form-submit-notify',[this,options]);return this;function fileUpload(){var form=$form[0];if($(':input[name=submit],:input[id=submit]',form).length){alert('Error: Form elements must not have name or id of \"submit\".');return;}var s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;var id='jqFormIO'+(new Date().getTime()),fn='_'+id;window[fn]=function(){var f=$io.data('form-plugin-onload');if(f){f();window[fn]=undefined;try{delete window[fn];}catch(e){}}}\nvar $io=$('<iframe id=\"'+id+'\" name=\"'+id+'\" src=\"'+s.iframeSrc+'\" onload=\"window[\\'_\\'+this.id]()\" />');var io=$io[0];$io.css({position:'absolute',top:'-1000px',left:'-1000px'});var xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;$io.attr('src',s.iframeSrc);}};var g=s.global;if(g&&!$.active++){$.event.trigger(\"ajaxStart\");}if(g){$.event.trigger(\"ajaxSend\",[xhr,s]);}if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}return;}if(xhr.aborted){return;}var cbInvoked=false;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type==\"image\"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}function doSubmit(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(form.getAttribute('method')!='POST'){form.setAttribute('method','POST');}if(form.getAttribute('action')!=s.url){form.setAttribute('action',s.url);}if(!s.skipEncodingOverride){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}if(s.timeout){setTimeout(function(){timedOut=true;cb();},s.timeout);}var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){extraInputs.push($('<input type=\"hidden\" name=\"'+n+'\" value=\"'+s.extraData[n]+'\" />').appendTo(form)[0]);}}$io.appendTo('body');$io.data('form-plugin-onload',cb);form.submit();}finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}$(extraInputs).remove();}}if(s.forceSync){doSubmit();}else{setTimeout(doSubmit,10);}var data,doc,domCheckCount=50;function cb(){if(cbInvoked){return;}$io.removeData('form-plugin-onload');var ok=true;try{if(timedOut){throw'timeout';}doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body==null||doc.body.innerHTML=='')){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}cbInvoked=true;xhr.responseText=doc.documentElement?doc.documentElement.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};var scr=/(json|script)/.test(s.dataType);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;}else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent;}else if(b){xhr.responseText=b.innerHTML;}}}else if(s.dataType=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}data=$.httpData(xhr,s.dataType);}catch(e){log('error caught:',e);ok=false;xhr.error=e;$.handleError(s,xhr,'error',e);}if(xhr.aborted){log('upload aborted');ok=false;}if(ok){s.success.call(s.context,data,'success',xhr);if(g){$.event.trigger(\"ajaxSuccess\",[xhr,s]);}}if(g){$.event.trigger(\"ajaxComplete\",[xhr,s]);}if(g&&! --$.active){$.event.trigger(\"ajaxStop\");}if(s.complete){s.complete.call(s.context,xhr,ok?'success':'error');}setTimeout(function(){$io.removeData('form-plugin-onload');$io.remove();xhr.responseXML=null;},100);}function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}else{doc=(new DOMParser()).parseFromString(s,'text/xml');}return(doc&&doc.documentElement&&doc.documentElement.tagName!='parsererror')?doc:null;}}};$.fn.ajaxForm=function(options){if(this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}return this.ajaxFormUnbind().bind('submit.form-plugin',function(e){if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}).bind('click.form-plugin',function(e){var target=e.target;var $el=$(target);if(!($el.is(\":submit,input:image\"))){var t=$el.closest(':submit');if(t.length==0){return;}target=t[0];}var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);});};$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic){var a=[];if(this.length===0){return a;}var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n){continue;}if(semantic&&form.clk&&el.type==\"image\"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}continue;}v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}else if(v!==null&&typeof v!='undefined'){a.push({name:n,value:v});}}if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}v.constructor==Array?$.merge(val,v):val.push(v);}return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}if(one){return v;}a.push(v);}}return a;}return $(el).val();};$.fn.clearForm=function(){return this.each(function(){$('input,select,textarea',this).clearFields();});};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=='text'||t=='password'||tag=='textarea'){this.value='';}else if(t=='checkbox'||t=='radio'){this.checked=false;}else if(tag=='select'){this.selectedIndex=-1;}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}this.selected=select;}});};function log(){if($.fn.ajaxSubmit.debug){var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}};})(jQuery);(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn(\"nothing selected, can't validate, returning nothing\");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find(\"input, button\").filter(\".cancel\").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find(\"input, button\").filter(\":submit\").click(function(){validator.submitButton=this;});}this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$(\"<input type='hidden'/>\").attr(\"name\",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case\"add\":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case\"remove\":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[\":\"],{blank:function(a){return!$.trim(\"\"+a.value);},filled:function(a){return!!$.trim(\"\"+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp(\"\\\\{\"+i+\"\\\\}\",\"g\"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:\"error\",validClass:\"valid\",errorElement:\"label\",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);else if(element.parentNode.name in this.submitted)this.element(element.parentNode);},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:\"This field is required.\",remote:\"Please fix this field.\",email:\"Please enter a valid email address.\",url:\"Please enter a valid URL.\",date:\"Please enter a valid date.\",dateISO:\"Please enter a valid date (ISO).\",number:\"Please enter a valid number.\",digits:\"Please enter only digits.\",creditcard:\"Please enter a valid credit card number.\",equalTo:\"Please enter the same value again.\",accept:\"Please enter a value with a valid extension.\",maxlength:$.validator.format(\"Please enter no more than {0} characters.\"),minlength:$.validator.format(\"Please enter at least {0} characters.\"),rangelength:$.validator.format(\"Please enter a value between {0} and {1} characters long.\"),range:$.validator.format(\"Please enter a value between {0} and {1}.\"),max:$.validator.format(\"Please enter a value less than or equal to {0}.\"),min:$.validator.format(\"Please enter a value greater than or equal to {0}.\")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,\"validator\"),eventType=\"on\"+event.type.replace(/^validate/,\"\");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}$(this.currentForm).validateDelegate(\":text, :password, :file, select, textarea\",\"focusin focusout keyup\",delegate).validateDelegate(\":radio, :checkbox, select, option\",\"click\",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind(\"invalid-form.validate\",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler(\"invalid-form\",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(\":visible\").focus().trigger(\"focusin\");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(\":input\").not(\":submit, :reset, :image, [disabled]\").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error(\"%o has no name assigned\",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+\".\"+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\\r/g,\"\"),element,rule.parameters);if(result==\"dependency-mismatch\"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result==\"pending\"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log(\"exception occured when checking element \"+element.id+\", check the '\"+rule.method+\"' method\",e);throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],\"<strong>Warning: No message defined for \"+element.name+\"</strong>\");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\\$?\\{(\\d+)\\}/g;if(typeof message==\"function\"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr(\"generated\")&&label.html(message);}else{label=$(\"<\"+this.settings.errorElement+\"/>\").attr({\"for\":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||\"\");if(this.settings.wrapper){label=label.hide().show().wrap(\"<\"+this.settings.wrapper+\"/>\").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text(\"\");typeof this.settings.success==\"string\"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $(\"option:selected\",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{\"boolean\":function(param,element){return param;},\"string\":function(param,element){return!!$(param,element.form).length;},\"function\":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&\"dependency-mismatch\";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler(\"invalid-form\",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,\"previousValue\")||$.data(element,\"previousValue\",{old:null,valid:true,message:this.defaultMessage(element,\"remote\")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case\"string\":keepRule=!!$(val.depends,element.form).length;break;case\"function\":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages;}return rules;},normalizeRule:function(data){if(typeof data==\"string\"){var transformed={};$.each(data.split(/\\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return\"dependency-mismatch\";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return\"dependency-mismatch\";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==\"string\"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:\"abort\",port:\"validate\"+element.name,dataType:\"json\",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=(previous.message=response||validator.defaultMessage(element,\"remote\"));errors[element.name]=$.isFunction(message)?message(value):message;validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return\"pending\";}else if(this.pending[element.name]){return\"pending\";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\\d{4}[\\/-]\\d{1,2}[\\/-]\\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)(?:\\.\\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return\"dependency-mismatch\";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\\D/g,\"\");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param==\"string\"?param.replace(/,/g,'|'):\"png|jpe?g|gif\";return this.optional(element)||value.match(new RegExp(\".(\"+param+\")$\",\"i\"));},equalTo:function(value,element,param){var target=$(param).unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode==\"abort\"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);";
